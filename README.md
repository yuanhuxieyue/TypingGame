# TypingGame - 实时双人打字竞速游戏

## 项目概述
一款基于C++开发的实时双人打字竞速游戏，采用客户端-服务器架构。两名玩家通过输入指定文本内容竞速，角色将根据打字进度在赛道上移动，优先完成者获胜。

## 功能特性
- 🕹️ 双人实时对战模式
- 📡 基于HTTP协议的客户端与服务器通信
- 🖼️ 2D动画角色与场景渲染
- 🎮 实时进度同步与角色运动

## 目录结构
```text
TypingGame/
├── Server/                 # 服务器端
│   ├── server.cpp          # 主服务器逻辑
│   └── text.txt            # 比赛文本内容
│
├── Client/                 # 客户端
│   ├── src/                # 源代码
│   │   ├── client.cpp      # 主客户端逻辑
│   │   ├── animation.h     # 动画处理模块
|   |   ├── atlas.h			# 资源类
│   │   ├── camera.h        # 摄像机控制模块
│   │   ├── path.h          # 运动路径计算
│   │   ├── player.h        # 玩家角色控制
│	│	├── timer.h			# 定时器
│	│	├──	util.h			# 工具函数
│   │   ├──	vector2.h		# 封装的二位数组类
│   │   └──	config.cfg      # 服务器配置
│   └── resources/          # 游戏资源
│
└── thirdparty/             # 第三方依赖库
    └── httplib/            # HTTP服务器库
```
## 快速开始
### 依赖项
- C++14
- EasyX图形库（Windows）
- httplib

### 配置文件
`config.cfg` 示例：

```text
http://localhost:25565
```

## 核心模块说明
### 服务器架构 (server.cpp)
- **路由处理**：
  
  ```cpp
  POST /login         // 玩家登录
  POST /query_text    // 获取比赛文本
  POST /update_[1|2]  // 更新玩家进度
  ```
- **同步机制**：
  - 使用全局互斥锁 (`std::mutex`) 保证线程安全
  - 原子操作更新玩家进度

### 客户端架构 (client.cpp)
#### 核心流程
1. 资源加载 (`load_resources`)
2. 服务器连接 (`login_to_server`)
3. 游戏主循环：
   ```cpp
   while (true) {
       处理输入 → 更新状态 → 渲染画面
   }
   ```

#### 关键功能
- **动画系统**：通过Atlas类管理角色动画帧
- **路径系统**：根据打字进度计算角色位置
- **摄像机系统**：实现玩家跟随视角
- **音频管理**：支持背景音乐与音效播放

## 协议与接口
### 服务器API
| 端点          | 方法 | 描述                 |
|---------------|------|----------------------|
| /login        | POST | 获取玩家ID (1/2)     |
| /query_text   | POST | 获取比赛文本内容     |
| /update_1     | POST | 更新玩家1进度        |
| /update_2     | POST | 更新玩家2进度        |

### 数据格式
- 进度更新：纯文本整数

## 扩展开发
1. **添加新角色**：
   - 准备动画资源（4方向idle/run各4帧）
   - 扩展`Atlas`加载逻辑
   - 修改`Player`初始化参数

2. **修改赛道**：
   ```cpp
   // 在Path构造函数中修改坐标点
   Path path = Path({{x1,y1}, {x2,y2}, ...});
   ```

## 已知限制
- 仅支持Windows平台
- 需要手动配置第三方库路径
- 当前仅支持双人对战模式
